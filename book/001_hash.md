---
layout: book
title: 哈希
---

哈希（ hash ） 这个词的英文本意是“切碎并搅拌”的意思，有一种菜就叫 Hash ，就是把很多食材切碎并搅拌在一起做成的，如下图：

![](http://peterpic.qiniudn.com/hash_dish.jpg)


在计算机科学领域，所谓的哈希运算是指把一个任意长度的数据，通过运算，得到一个比较短的固定长度的数据与之对应，这个数据就叫做“哈希值”。通常，我们可以拿出这个哈希值来指代那个原始数据，因为原始数据是比较大的。例如，我们有原始数据文件 M，那么我们有一个”哈希算法“ F(), 那么把 M 传递给 F 就可以得到哈希值 X = F(M)。给定 F 那么 X 的长度是固定的。例如对于哈希算法 md5，算出的哈希值长度是 32 位，对于更为安全的 sha256 算法，那么输出就是 64位（是指64位8进制数，也就是 256 位2进制数）。


一个可靠的哈希算法要满足三个条件：第一，给定一个数据文件 M 很容易算出它的哈希值 X = F(M)，第二，根据 X 不能算出 M，第三，很难找出两条不同的信息，拥有相同的哈希值。所以，根据第一第二点，我们可以说哈希算法是一个单向的算法；那么第三点也就意味着如果我们的数据在传输过程中有丝毫的损坏，那么当我们再次运算它的哈希值的时候，哈希值也会不同，所以人们经常会使用这个办法开检查自己下载的文件是否完好的下载了。


冲突：既然输出为固定的长度，证明输出的可能的哈希值是个有限的范围，而同时输入的数据文件又是任意的，无限的，所以不可避免的，可能会 出现不同的输入得到相同的输出，这样就撞车了。

所以，理论上输出的哈希值越长，那么出现冲突的可能行就越小，那么相应的，这种哈希算法就可能更安全。但是同时计算速度会变慢。

常用的算法： crc32，比较简单高效，安全性差，适合做 checksum 用来校验文件的完整性 md5，sha256

~~~
sha256()
2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824
crc32()
84fb764c
md5()
d7f2b08853cc9d9c7664e4a421378c24
~~~


总之，比较简短高效的哈希算法可以用来做完整性校验（integrity verification)，这样的哈希值也可以叫做”校验值“（checksum), 也可以用来做原始数据的代表，这时哈希值也可以叫做”指纹“（fingerprint)。比较长的哈希算法（例如 sha256)可以用在加密领域。

![](http://peterpic.qiniudn.com/fingerprint.jpeg)

- ref:
  - <http://v.youku.com/v_show/id_XNTM5OTY4NTU2.html>
  - [youku Udacity公开课:CS253网页开发](http://v.youku.com/v_show/id_XNTM5OTY4NTU2.html)
